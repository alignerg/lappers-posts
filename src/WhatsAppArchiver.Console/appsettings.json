{
  // WhatsApp Archiver Configuration
  // This file configures the WhatsApp chat archiver application.
  
  "WhatsAppArchiver": {
    "GoogleServiceAccount": {
      // Path to the Google service account credentials JSON file.
      // Supports both absolute paths (e.g., "/home/user/credentials/service-account.json")
      // and relative paths (e.g., "./credentials/google-service-account.json").
      // Relative paths are resolved from the application's base directory.
      "CredentialsPath": "./credentials/google-service-account.json"
    },
    
    // State management configuration
    "StateRepository": {
      // Base directory path where processing state files will be stored.
      // State files track which messages have been processed to enable idempotent operations.
      // Filenames are auto-generated based on document ID and sender name.
      // This can be overridden using --state-dir or --state-file command-line options.
      // Example: "./state" or "~/docs/lappers/state"
      "BasePath": "./state"
    },
    
    // Default message formatter to use for chat messages.
    // Valid values: "default", "compact", "verbose"
    // - default: [{timestamp}] {sender}: {content}
    // - compact: {sender}: {content}
    // - verbose: Detailed format with full date, time, and sender metadata
    "DefaultFormatter": "default",
    
    "Logging": {
      // Minimum log level to capture. Valid values: Trace, Debug, Information, Warning, Error, Critical
      "MinimumLevel": "Information",
      
      // Path where log files should be written. Supports absolute and relative paths.
      // Example: "./logs/whatsapp-archiver.log" or "/var/log/whatsapp-archiver/app.log"
      "FilePath": "./logs/whatsapp-archiver.log",
      
      // Number of days to retain log files before automatic deletion.
      // Set to 0 to disable automatic log retention cleanup.
      "RetentionDays": 30
    },
    
    "RetryPolicies": {
      // Maximum number of retry attempts for transient failures (e.g., network errors, file I/O).
      "MaxAttempts": 3,
      
      // Backoff delay in seconds for each retry attempt using exponential backoff.
      // For example, [2, 4, 8] means: 1st retry after 2s, 2nd after 4s, 3rd after 8s.
      "BackoffDelaySeconds": [2, 4, 8]
    }
  },
  
  // Serilog Configuration
  // Structured logging configuration using Serilog.
  "Serilog": {
    "MinimumLevel": {
      "Default": "Information",
      "Override": {
        "Microsoft": "Warning",
        "System": "Warning"
      }
    },
    "Enrich": [
      "FromLogContext"
    ],
    "WriteTo": [
      {
        "Name": "Console",
        "Args": {
          "theme": "Serilog.Sinks.SystemConsole.Themes.AnsiConsoleTheme::Code, Serilog.Sinks.Console",
          "outputTemplate": "[{Timestamp:HH:mm:ss} {Level:u3}] {CorrelationId} {Message:lj}{NewLine}{Exception}"
        }
      },
      {
        "Name": "File",
        "Args": {
          "path": "./logs/whatsapp-archiver-.log",
          "rollingInterval": "Day",
          "retainedFileCountLimit": 30,
          "outputTemplate": "[{Timestamp:yyyy-MM-dd HH:mm:ss.fff zzz} {Level:u3}] {CorrelationId} {Message:lj}{NewLine}{Exception}"
        }
      }
    ]
  }
}
